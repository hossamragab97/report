<ngx-spinner type="ball-scale-multiple"></ngx-spinner>

<div class="p-5">
    <label>Select Sensor</label>
    <select2 [data]="allDevices" [(ngModel)]="selectDevice" placeholder="Select Sensor" customSearchEnabled="true"
        (search)="searchDevice($event)" (open)="openDevice($event)" (update)="selectDevicess($event)">
    </select2>
    <p *ngIf="selectDevice == undefined && submitted" class="text-danger">Sensor is required.</p>

    <div class="mt-3">
        <label>Select Field</label>
        <select2 [data]="allFields" [(ngModel)]="selectField" placeholder="Select Field" customSearchEnabled="true"
            (search)="searchField($event)" (open)="openFeild($event)">
        </select2>
        <p *ngIf="selectField == undefined && submitted" class="text-danger">Field is required.</p>
    </div>

    <div class="mt-3" style="display: flex; justify-content: center;align-items: center;">
        <input (click)="changeTime('D')" type="submit" name="24H" value="24 Hours" id="24H" class="btn btn-dark">
        &nbsp;
        <input (click)="changeTime('W')" type="submit" name="1W" value="1 Week" id="1W" class="btn btn-dark">
        &nbsp;
        <input (click)="changeTime('M')" type="submit" name="1M" value="1 Month" id="1M" class="btn btn-dark">
    </div>

    <div class="row mt-3 align-items-center">
        <div class="col-lg-4">
            <label>From</label>
            <input class="form-control" type="datetime-local" [(ngModel)]="from" (change)="fromChange()">
        </div>
        <div class="col-lg-4">
            <label>To</label>
            <input class="form-control" type="datetime-local" [(ngModel)]="to"
            [min]="from" [max]="maxToDate">
        </div>
        <div class="col-lg-4 text-center">
            <button class="btn btn-success mt-lg-4 mt-3" (click)="view()">View</button> &nbsp;
            <button class="btn btn-dark mt-lg-4 mt-3" (click)="exportToPdf()">Pdf</button> &nbsp;
            <button class="btn btn-dark mt-lg-4 mt-3" (click)="exportToExcel()">Excel</button>
        </div>
    </div>

    <div id="graph" class="mt-5">
        <div>
            <apx-chart [series]="chartDataOptions.series" [title]="chartDataOptions.title"
                [chart]="chartDataOptions.chart" [xaxis]="chartDataOptions.xaxis" [yaxis]="chartDataOptions.yaxis"
                [dataLabels]="chartDataOptions.dataLabels" [tooltip]="chartDataOptions.tooltip"
                [noData]="chartDataOptions.noData">
            </apx-chart>
        </div>
        <div class="mt-5">
            <apx-chart [series]="chartAlertsOptions.series" [title]="chartAlertsOptions.title"
            [chart]="chartAlertsOptions.chart" [xaxis]="chartAlertsOptions.xaxis" [yaxis]="chartAlertsOptions.yaxis"
            [dataLabels]="chartAlertsOptions.dataLabels" [tooltip]="chartAlertsOptions.tooltip"
            [noData]="chartAlertsOptions.noData">
        </apx-chart>
    </div>
    </div>
</div>


<apx-chart id="diagram" [ngStyle]="{ position: 'absolute', left: '-1000px', display: 'none' }"
    [series]="chartDataGraphOptions.series" [chart]="chartDataGraphOptions.chart" [xaxis]="chartDataGraphOptions.xaxis"
    [yaxis]="chartDataGraphOptions.yaxis" [dataLabels]="chartDataGraphOptions.dataLabels" [noData]="chartDataGraphOptions.noData">
</apx-chart>

<apx-chart id="diagram2" [ngStyle]="{ position: 'absolute', left: '-1000px', display: 'none' }"
    [series]="chartAlertsGraphOptions.series"  [chart]="chartAlertsGraphOptions.chart" [xaxis]="chartAlertsGraphOptions.xaxis"
    [yaxis]="chartAlertsGraphOptions.yaxis" [dataLabels]="chartAlertsGraphOptions.dataLabels" [noData]="chartAlertsGraphOptions.noData">
</apx-chart>